{
  "datacenter": "<%= node['consul']['dc'] %>",
  "node_name": "<%= node.name.split('.')[0] %>",
  "server": <%= Array(node['consul']['servers']).include?(node['network']['interfaces']['eth1']['addresses'].keys[1]) ? 'true' : 'false' %>,
<% if node['consul']['start_join'] == true -%>
  "start_join": [ <%= Array(node['consul']['servers']).map {|ip| "\"#{ip}\"" }.join(',') %> ],
<% end -%>
<% if node['consul']['web_ui']['use'] == true -%>
  "ui_dir": "/usr/lib/consul/web",
<% end -%>
  "domain": "<%= node['consul']['domain'] %>",
  "log_level": "<%= node['consul']['log_level'] %>",
  "bind_addr": "<%= node['consul']['bind_addr'] %>",
  "client_addr": "<%= node['consul']['client_addr'] %>"
}
