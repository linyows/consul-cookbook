{
  "datacenter": "<%= node['consul']['dc'] || 'dc1' %>",
  "node_name": "<%= node.name.split('.')[0] %>",
  "server": <%= Array(node['consul']['servers']).include?(node['network']['interfaces']['eth1']['addresses'].keys[1]) ? 'true' : 'false' %>,
<% if node['consul']['start_join'] == true -%>
  "start_join": [ <%= Array(node['consul']['servers']).map {|ip| "\"#{ip}\"" }.join(',') %> ],
<% end -%>
  "domain": "<%= node['consul']['domain'] || 'consul.lan' %>",
  "log_level": "<%= node['consul']['log_level'] || 'INFO' %>",
  "bind_addr": "<%= node['consul']['client_addr'] || '0.0.0.0' %>",
  "client_addr": "<%= node['consul']['client_addr'] || '127.0.0.1' %>"
}
